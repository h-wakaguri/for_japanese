<!DOCTYPE html> 
<html lang="ja"> 
	<head> 
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8"> 
		<style type="text/css"> 
		canvas {
			-webkit-user-select: none;
			user-select: none;
			border: solid 3px #000;
			background-color: white; 
		},
		</style> 

		<!--[if lt IE 9]>
		<script src="html5.js" type="text/javascript"></script>
		<![endif]--> 

		<script src="boukeshi.js" type="text/javascript"></script>
		<script src="boukeshi_graph.js" type="text/javascript"></script>
		<script type="text/javascript">
			var bg;
			
			onload = function() {
				var stage = new Array(1, 2, 3, 4, 5);
				var option = {"pich": 3};
				bg = new BoukeshiGraph("boukeshi", stage, document.f1.com_st.checked, option);
			};
			
			var tosmall = function() {
				var pich = bg.getPich();
				pich -= 0.1;
				if(pich < 1) pich = 1;
				bg.setPich(pich);
			}
			
			var tobig = function() {
				var pich = bg.getPich();
				pich += 0.1;
				if(pich > 10) pich = 10;
				bg.setPich(pich);
			}
			
			var restart = function() {
				if(!bg.isEnd()) {
					if(!confirm("ゲームを初めからやり直しますか？")) {
						return false;
					}
				}
				var stage = bg.getStage();
				var bpich = bg.getPich();
				var option = {"pich": bpich};
				bg = new BoukeshiGraph("boukeshi", stage, document.f1.com_st.checked, option);
				
				return true;
			}
			
			var create = function() {
				if(!bg.isEnd()) {
					if(!confirm("ゲームを中断してよろしいですか？")) {
						return false;
					}
				}
				var stage = bg.getStage();
				var bpich = bg.getPich();
				var option = {"pich": bpich};
				bg = new BoukeshiStageMaker("boukeshi", stage, option);
				
				return true;
			}
			
		</script>

		<title>HTML5 棒消しゲーム</title> 
	</head> 
	<body bgcolor="#aadd99" alink="#0000ff" link="#005555" vlink="#005555"> 
		<h1>棒消しゲーム (HTML5版)</h1>
		<div>
			最近のブラウザはJavaアプレットを動かすと動作が不安定になりがちになってきてしまったため、
			HTML5のcanvas要素を使って「棒消しゲーム」を作り直しました。<br />
			ブラウザによっては動作しない可能性があります。
			(2011/09/05)<br />
			Chrome バージョン27.0 でマウスドラッグが正常に動かなくなる不具合を修正(2013/06/15)
			<br />
		</div>
		<div id="boukeshi"></div> 
		<hr />
		
		<form name="f1">
			<div>
				<input type="button" value="Small" onclick="tosmall()" />
				<input type="button" value="Big" onclick="tobig()" />
			</div>
			<div>
				<input type="checkbox" name="com_st" />computer start
				<input type="button" value="Restart" onclick="restart()" /><br />
				<input type="button" value="Create Stage" onclick="create()" />
			</div>
		</form>
		<hr />
		
		<div id="log"></div>
		<div><small>
			<div>IEで jQueryを使わなくてもスライダーが使えるようになったら、[Small][Big]ボタンはスライダーに変更したいと思います。</div>
		</small></div>
		<hr />

		<!-- <a href="../">----  戻る  ----</a> -->
	</body> 
</html> 